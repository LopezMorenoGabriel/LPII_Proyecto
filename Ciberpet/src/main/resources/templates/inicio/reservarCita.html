<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" th:replace="shared/layout :: layoutPagina(~{::contenido})">

<div th:fragment="contenido">
	<div class="container mt-4">
		<div class="card shadow-sm">
			<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
				<h5 class="mb-0">Reservar Cita</h5>
				<a th:href="@{/productos}" class="btn btn-light btn-sm">Volver</a>
			</div>

			<div class="card-body">
				<form th:action="@{/cliente/guardarCitaCliente}" th:object="${cita}" method="post">

					<!-- Cliente -->
					<div class="mb-3">
						<label class="form-label">Cliente</label>
						<input type="text"
						       th:value="${cita.usuario.nombre + ' ' + cita.usuario.apellidos}"
						       class="form-control" readonly>
						<input type="hidden" th:field="*{usuario.idUser}">
					</div>

					<!-- Fecha y hora -->
					<div class="row mb-3">
						<div class="col-md-6">
							<label class="form-label">Fecha de la cita</label>
							<input type="date" th:field="*{fechaCita}" class="form-control"
							       th:classappend="${#fields.hasErrors('fechaCita')} ? 'is-invalid' : ''">
							<div class="invalid-feedback" th:errors="*{fechaCita}"></div>
						</div>

						<div class="col-md-6">
							<label class="form-label">Hora de la cita</label>
							<input type="time" th:field="*{horaCita}" class="form-control"
							       th:classappend="${#fields.hasErrors('horaCita')} ? 'is-invalid' : ''">
							<div class="invalid-feedback" th:errors="*{horaCita}"></div>
						</div>
					</div>

					<!-- Servicio y motivo -->
					<div class="row mb-3">
						<div class="col-md-6">
							<label class="form-label">Servicio</label>
							<select class="form-select" th:field="*{servicio}"
							        th:classappend="${#fields.hasErrors('servicio')} ? 'is-invalid' : ''">
								<option value="">-- Selecciona un servicio --</option>
								<option th:each="s : ${servicios}" th:value="${s.idServicio}"
								        th:text="${s.nomServicio}"></option>
							</select>
							<div class="invalid-feedback" th:errors="*{servicio}"></div>
						</div>

						<div class="col-md-6">
							<label class="form-label">Motivo</label>
							<input type="text" th:field="*{motivo}" class="form-control"
							       th:classappend="${#fields.hasErrors('motivo')} ? 'is-invalid' : ''">
							<div class="invalid-feedback" th:errors="*{motivo}"></div>
						</div>
					</div>

					<!-- BotÃ³n -->
					<div class="d-flex justify-content-end">
						<button type="submit" class="btn btn-success">
							<i class="fas fa-save"></i> Reservar
						</button>
					</div>
				</form>

				<!-- Alertas -->
				<th:block th:utext="${alert}"></th:block>
			</div>
		</div>
	</div>
</div>

</html>

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
	<header th:fragment="encabezado">
		<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm">
			<div class="container-fluid">
				<!-- Logo -->
				<a class="navbar-brand" href="#">
					<img th:src="@{/imgFront/Logociberpet.png}" alt="Logo" height="40">
				</a>

				<!-- Botón para responsive -->
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
					<span class="navbar-toggler-icon"></span>
				</button>

				<!-- Navegación -->
				<div class="collapse navbar-collapse" id="navbarNav">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item"><a class="nav-link" th:href="@{/inicio}">Inicio</a></li>
						<li class="nav-item"><a class="nav-link" th:href="@{/productos}">Productos</a></li>
						<li class="nav-item"><a class="nav-link" th:href="@{/nosotros}">Sobre nosotros</a></li>
						<li class="nav-item"><a class="nav-link" th:href="@{/contacto}">Contacto</a></li>
					</ul>

					<!-- Área de usuario -->
					<ul class="navbar-nav ms-auto">
						<!-- Si el usuario está logueado -->
						<!-- Contenedor del usuario logueado -->
						<li class="nav-item dropdown no-arrow d-flex align-items-center gap-2"
							th:if="${session.usuarioSesion != null}">

							<!-- Botón carrito -->
							<a th:href="@{/carrito}"
								class="position-relative btn btn-outline-primary btn-sm rounded-circle d-flex align-items-center justify-content-center"
								style="width: 38px; height: 38px;" title="Ver carrito">
								<i class="fa-solid fa-cart-shopping"></i>

								<!-- Badge de cantidad -->
								<span
									class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
									th:text="${carritoTotal != null ? carritoTotal : 0}">
									0
								</span>
							</a>

							<!-- Dropdown de usuario -->
							<a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
								data-bs-toggle="dropdown" aria-expanded="false">
								<span class="me-2 d-none d-lg-inline text-gray-600 small"
									th:text="${session.usuarioSesion.correo}"></span>
								<img class="img-profile rounded-circle" th:src="@{/img/undraw_profile.svg}" alt="User"
									style="width: 32px; height: 32px;">
							</a>

							<!-- Dropdown -->
							<ul class="dropdown-menu dropdown-menu-end shadow animated--grow-in"
								aria-labelledby="userDropdown">
								<li><a class="dropdown-item" th:href="@{/misCompras}">
										<i class="fas fa-shopping-cart fa-sm fa-fw me-2 text-gray-400"></i>
										Mis compras
									</a></li>
								<li><a class="dropdown-item" th:href="@{/misCitas}">
										<i class="fas fa-calendar-check fa-sm fa-fw me-2 text-gray-400"></i>
										Mis citas
									</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a id="cerrarSesion" class="dropdown-item text-danger" href="#">
										<i class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>
										Cerrar sesión
									</a></li>
							</ul>
						</li>


						<!-- Si NO está logueado -->
						<li th:if="${session.usuarioSesion == null}" class="nav-item d-flex gap-2">
							<a class="btn btn-outline-primary btn-sm" th:href="@{/login}">Login</a>
							<a class="btn btn-success btn-sm" th:href="@{/registrar-usuario}">Registrarse</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
</body>

</html>